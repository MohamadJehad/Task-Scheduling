{
  "openapi": "3.0.1",
  "info": {
    "title": "CardioExplorer API",
    "description": "Core authentication endpoints for OAuth 2.0 organization authentication and authenticated magic link generation.",
    "version": "1.0.0",
    "contact": {
      "name": "CardioExplorer API Support",
      "email": "support@cardioexplorer.com"
    }
  },
  "tags": [
    {
      "name": "Authentication"
    }
  ],
  "paths": {
    "/api/organization-auth/authenticate": {
      "post": {
        "summary": "Obtain access token",
        "deprecated": false,
        "description": "Validates clientId and clientSecret parameters, then returns a JWT access token. Use the returned accessToken in the Authorization header as 'Bearer {token}' for subsequent API calls. Token expires after 3600 seconds.",
        "operationId": "authenticateOrganization",
        "tags": [
          "Authentication"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {},
              "examples": {
                "example1": {
                  "value": {
                    "clientId": "12345678-1234-1234-1234-123456789abc",
                    "clientSecret": "your-client-secret-here",
                    "scope": "api.read api.write"
                  },
                  "summary": "Standard authentication request"
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Authentication successful - JWT token issued",
            "content": {
              "application/json": {
                "schema": {},
                "example": {
                  "status": "success",
                  "message": "Authentication successful",
                  "errors": null,
                  "data": {
                    "accessToken": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...",
                    "tokenType": "Bearer",
                    "expiresIn": 3600,
                    "organization": {
                      "organizationId": "550e8400-e29b-41d4-a716-446655440000",
                      "azureClientId": "12345678-1234-1234-1234-123456789abc",
                      "organizationName": "Organization Name",
                      "contactEmail": "admin@organization.com",
                      "accessLevel": 2,
                      "isActive": true,
                      "rateLimitPerHour": 1000,
                      "allowedIpAddresses": "10.0.0.0/8",
                      "createdAt": "2024-01-15T10:30:00Z",
                      "updatedAt": "2024-01-20T14:45:00Z",
                      "lastAccessedAt": "2024-01-25T09:15:00Z",
                      "totalApiCalls": 2847,
                      "createdByUserEmail": "admin@cardioexplorer.com",
                      "metadata": "{\"department\":\"IT\",\"region\":\"US-East\"}"
                    }
                  }
                }
              }
            },
            "headers": {}
          },
          "400": {
            "description": "Request validation failed. Check that clientId is a valid UUID and clientSecret is provided. Response includes specific field errors.",
            "content": {
              "application/json": {
                "schema": {},
                "example": {
                  "status": "error",
                  "message": "Request validation failed",
                  "errors": {
                    "clientId": [
                      "The clientId field is required."
                    ],
                    "clientSecret": [
                      "The clientSecret field is required."
                    ]
                  },
                  "data": null
                }
              }
            },
            "headers": {}
          },
          "401": {
            "description": "Authentication failed. Either clientId doesn't exist, clientSecret is incorrect, or organization access is disabled.",
            "content": {
              "application/json": {
                "schema": {},
                "example": {
                  "status": "error",
                  "message": "Invalid client credentials",
                  "errors": null,
                  "data": null
                }
              }
            },
            "headers": {}
          },
          "500": {
            "description": "Server error during token generation. Retry the request after a brief delay.",
            "content": {
              "application/json": {
                "schema": {},
                "example": {
                  "status": "error",
                  "message": "Internal server error occurred",
                  "errors": null,
                  "data": null
                }
              }
            },
            "headers": {}
          }
        },
        "security": []
      }
    },
    "/api/auth/magic-links/generate": {
      "post": {
        "summary": "Generate magic link",
        "deprecated": false,
        "description": "Generates magic link for currently authenticated user. Requires valid Bearer token in Authorization header. Returns magic link URL and expiration details.",
        "operationId": "generateMagicLink",
        "tags": [
          "Authentication"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Magic link generated successfully for authenticated user. Use returned URL for authentication.",
            "content": {
              "application/json": {
                "schema": {},
                "example": {
                  "status": "success",
                  "message": "Magic link generated successfully",
                  "errors": null,
                  "data": {
                    "magicLink": "https://api.cardioexplorer.com/api/auth/magic-links/verify?token=generated_token",
                    "message": "Magic link generated successfully",
                    "expiresAt": "2024-01-25T11:30:00Z"
                  }
                }
              }
            },
            "headers": {}
          },
          "400": {
            "description": "Invalid request or unable to generate magic link for current user context.",
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "headers": {}
          },
          "401": {
            "description": "Authentication required. Provide valid Bearer token in Authorization header.",
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "headers": {}
          },
          "500": {
            "description": "Server error during magic link generation.",
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/fhir/draft-test": {
      "post": {
        "summary": "Gererate draft test",
        "deprecated": false,
        "description": "Receives a FHIR resource, validates it, and creates a draft test (returning draftTestId and itemsMapped). It extracts cardiac risk factors from the FHIR object (e.g., age, blood pressure, lipid panel, glucose). ",
        "tags": [],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "",
            "required": true,
            "example": "Bearer {{token}}",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Content-Type",
            "in": "header",
            "description": "",
            "required": true,
            "example": "application/json",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "resourceType": {
                    "type": "string"
                  },
                  "type": {
                    "type": "string"
                  },
                  "language": {
                    "type": "string"
                  },
                  "entry": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "fullUrl": {
                          "type": "string"
                        },
                        "resource": {
                          "type": "object",
                          "properties": {
                            "resourceType": {
                              "type": "string"
                            },
                            "id": {
                              "type": "string"
                            },
                            "language": {
                              "type": "string"
                            },
                            "text": {
                              "type": "object",
                              "properties": {
                                "status": {
                                  "type": "string"
                                },
                                "div": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "status",
                                "div"
                              ]
                            },
                            "name": {
                              "type": "string"
                            },
                            "status": {
                              "type": "string"
                            },
                            "category": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "coding": {
                                    "type": "array",
                                    "items": {
                                      "type": "object",
                                      "properties": {
                                        "system": {
                                          "type": "string"
                                        },
                                        "code": {
                                          "type": "string"
                                        },
                                        "display": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "system",
                                        "code",
                                        "display"
                                      ]
                                    }
                                  }
                                },
                                "required": [
                                  "coding"
                                ]
                              }
                            },
                            "code": {
                              "type": "object",
                              "properties": {
                                "coding": {
                                  "type": "array",
                                  "items": {
                                    "type": "object",
                                    "properties": {
                                      "system": {
                                        "type": "string"
                                      },
                                      "code": {
                                        "type": "string"
                                      },
                                      "display": {
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "system",
                                      "code",
                                      "display"
                                    ]
                                  }
                                },
                                "text": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "coding",
                                "text"
                              ]
                            },
                            "subject": {
                              "type": "object",
                              "properties": {
                                "reference": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "reference"
                              ]
                            },
                            "effectiveDateTime": {
                              "type": "string"
                            },
                            "valueQuantity": {
                              "type": "object",
                              "properties": {
                                "value": {
                                  "type": "integer"
                                },
                                "unit": {
                                  "type": "string"
                                },
                                "system": {
                                  "type": "string"
                                },
                                "code": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "value",
                                "unit",
                                "system",
                                "code"
                              ]
                            },
                            "performer": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "reference": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "reference"
                                ]
                              }
                            },
                            "referenceRange": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "low": {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number"
                                      },
                                      "unit": {
                                        "type": "string"
                                      },
                                      "system": {
                                        "type": "string"
                                      },
                                      "code": {
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "value",
                                      "unit",
                                      "system",
                                      "code"
                                    ]
                                  },
                                  "high": {
                                    "type": "object",
                                    "properties": {
                                      "value": {
                                        "type": "number"
                                      },
                                      "unit": {
                                        "type": "string"
                                      },
                                      "system": {
                                        "type": "string"
                                      },
                                      "code": {
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "value",
                                      "unit",
                                      "system",
                                      "code"
                                    ]
                                  }
                                },
                                "required": [
                                  "low",
                                  "high"
                                ]
                              }
                            }
                          },
                          "required": [
                            "resourceType",
                            "id",
                            "language",
                            "status",
                            "text",
                            "category",
                            "code",
                            "subject",
                            "effectiveDateTime",
                            "valueQuantity"
                          ]
                        }
                      },
                      "required": [
                        "fullUrl",
                        "resource"
                      ]
                    }
                  }
                },
                "required": [
                  "resourceType",
                  "type",
                  "language",
                  "entry"
                ]
              },
              "example": {
                "resourceType": "Bundle",
                "type": "collection",
                "language": "en-US",
                "entry": [
                  {
                    "fullUrl": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41",
                    "resource": {
                      "resourceType": "Patient",
                      "id": "here-type-patient-id",
                      "language": "en-US",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\">Example patient for Cardio Explorer.</div>"
                      }
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:5e7a2a9f-b4f3-4451-b4c4-2d2a3f0c7d9e",
                    "resource": {
                      "resourceType": "Organization",
                      "id": "5e7a2a9f-b4f3-4451-b4c4-2d2a3f0c7d9e",
                      "language": "en-US",
                      "name": "Cardio Explorer Laboratory",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\">Performing organization: Cardio Explorer Laboratory.</div>"
                      }
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:9e3c6c9a-2e7f-4b94-b1aa-6b1c9b0e3c22",
                    "resource": {
                      "resourceType": "Observation",
                      "id": "9e3c6c9a-2e7f-4b94-b1aa-6b1c9b0e3c22",
                      "language": "en-US",
                      "status": "final",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\">Age: 58 years.</div>"
                      },
                      "category": [
                        {
                          "coding": [
                            {
                              "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                              "code": "survey",
                              "display": "Survey"
                            }
                          ]
                        }
                      ],
                      "code": {
                        "coding": [
                          {
                            "system": "http://loinc.org",
                            "code": "30525-0",
                            "display": "Age"
                          }
                        ],
                        "text": "Age"
                      },
                      "subject": {
                        "reference": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41"
                      },
                      "effectiveDateTime": "2025-10-09T00:00:00Z",
                      "valueQuantity": {
                        "value": 58,
                        "unit": "years",
                        "system": "http://unitsofmeasure.org",
                        "code": "a"
                      },
                      "performer": [
                        {
                          "reference": "urn:uuid:5e7a2a9f-b4f3-4451-b4c4-2d2a3f0c7d9e"
                        }
                      ]
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:0c2f7a14-0b38-4b52-9c77-9b9a2f3f2a10",
                    "resource": {
                      "resourceType": "Observation",
                      "id": "0c2f7a14-0b38-4b52-9c77-9b9a2f3f2a10",
                      "language": "en-US",
                      "status": "final",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\">Albumin (serum/plasma): 4.3 g/dL.</div>"
                      },
                      "category": [
                        {
                          "coding": [
                            {
                              "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                              "code": "laboratory",
                              "display": "Laboratory"
                            }
                          ]
                        }
                      ],
                      "code": {
                        "coding": [
                          {
                            "system": "http://loinc.org",
                            "code": "1751-7",
                            "display": "Albumin [Mass/volume] in Serum or Plasma"
                          }
                        ],
                        "text": "Albumin (serum/plasma)"
                      },
                      "subject": {
                        "reference": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41"
                      },
                      "effectiveDateTime": "2025-10-09T00:00:00Z",
                      "valueQuantity": {
                        "value": 4.3,
                        "unit": "g/dL",
                        "system": "http://unitsofmeasure.org",
                        "code": "g/dL"
                      },
                      "referenceRange": [
                        {
                          "low": {
                            "value": 3.5,
                            "unit": "g/dL",
                            "system": "http://unitsofmeasure.org",
                            "code": "g/dL"
                          },
                          "high": {
                            "value": 5.2,
                            "unit": "g/dL",
                            "system": "http://unitsofmeasure.org",
                            "code": "g/dL"
                          }
                        }
                      ],
                      "performer": [
                        {
                          "reference": "urn:uuid:5e7a2a9f-b4f3-4451-b4c4-2d2a3f0c7d9e"
                        }
                      ]
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:4d8a9b2b-4e1c-4b2a-9f9f-3e5c7a1a2b33",
                    "resource": {
                      "resourceType": "Observation",
                      "id": "4d8a9b2b-4e1c-4b2a-9f9f-3e5c7a1a2b33",
                      "language": "en-US",
                      "status": "final",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\">High-sensitivity Troponin T: 12.7 pg/mL.</div>"
                      },
                      "category": [
                        {
                          "coding": [
                            {
                              "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                              "code": "laboratory",
                              "display": "Laboratory"
                            }
                          ]
                        }
                      ],
                      "code": {
                        "coding": [
                          {
                            "system": "http://loinc.org",
                            "code": "67151-1",
                            "display": "Troponin T.cardiac [Mass/volume] in Serum or Plasma by High sensitivity method"
                          }
                        ],
                        "text": "High-sensitivity Troponin T"
                      },
                      "subject": {
                        "reference": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41"
                      },
                      "effectiveDateTime": "2025-10-09T00:00:00Z",
                      "valueQuantity": {
                        "value": 12.7,
                        "unit": "pg/mL",
                        "system": "http://unitsofmeasure.org",
                        "code": "pg/mL"
                      },
                      "referenceRange": [
                        {
                          "low": {
                            "value": 0,
                            "unit": "pg/mL",
                            "system": "http://unitsofmeasure.org",
                            "code": "pg/mL"
                          },
                          "high": {
                            "value": 14,
                            "unit": "pg/mL",
                            "system": "http://unitsofmeasure.org",
                            "code": "pg/mL"
                          }
                        }
                      ],
                      "performer": [
                        {
                          "reference": "urn:uuid:5e7a2a9f-b4f3-4451-b4c4-2d2a3f0c7d9e"
                        }
                      ]
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:11111111-aaaa-4bbb-cccc-000000000001",
                    "resource": {
                      "resourceType": "Observation",
                      "id": "11111111-aaaa-4bbb-cccc-000000000001",
                      "language": "en-US",
                      "status": "final",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en-US\" xml:lang=\"en-US\">Total cholesterol: 190 mg/dL.</div>"
                      },
                      "category": [
                        {
                          "coding": [
                            {
                              "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                              "code": "laboratory",
                              "display": "Laboratory"
                            }
                          ]
                        }
                      ],
                      "code": {
                        "coding": [
                          {
                            "system": "http://loinc.org",
                            "code": "2093-3",
                            "display": "Cholesterol [Mass/volume] in Serum or Plasma"
                          }
                        ],
                        "text": "Total cholesterol"
                      },
                      "subject": {
                        "reference": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41"
                      },
                      "effectiveDateTime": "2025-10-09T00:00:00Z",
                      "valueQuantity": {
                        "value": 190,
                        "unit": "mg/dL",
                        "system": "http://unitsofmeasure.org",
                        "code": "mg/dL"
                      }
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:11111111-aaaa-4bbb-cccc-000000000002",
                    "resource": {
                      "resourceType": "Observation",
                      "id": "11111111-aaaa-4bbb-cccc-000000000002",
                      "language": "en-US",
                      "status": "final",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">HDL cholesterol: 55 mg/dL.</div>"
                      },
                      "category": [
                        {
                          "coding": [
                            {
                              "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                              "code": "laboratory",
                              "display": "Laboratory"
                            }
                          ]
                        }
                      ],
                      "code": {
                        "coding": [
                          {
                            "system": "http://loinc.org",
                            "code": "2085-9",
                            "display": "Cholesterol in HDL [Mass/volume] in Serum or Plasma"
                          }
                        ],
                        "text": "HDL cholesterol"
                      },
                      "subject": {
                        "reference": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41"
                      },
                      "effectiveDateTime": "2025-10-09T00:00:00Z",
                      "valueQuantity": {
                        "value": 55,
                        "unit": "mg/dL",
                        "system": "http://unitsofmeasure.org",
                        "code": "mg/dL"
                      }
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:11111111-aaaa-4bbb-cccc-000000000003",
                    "resource": {
                      "resourceType": "Observation",
                      "id": "11111111-aaaa-4bbb-cccc-000000000003",
                      "language": "en-US",
                      "status": "final",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">LDL cholesterol: 110 mg/dL.</div>"
                      },
                      "category": [
                        {
                          "coding": [
                            {
                              "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                              "code": "laboratory",
                              "display": "Laboratory"
                            }
                          ]
                        }
                      ],
                      "code": {
                        "coding": [
                          {
                            "system": "http://loinc.org",
                            "code": "13457-7",
                            "display": "Cholesterol in LDL [Mass/volume] in Serum or Plasma by calculation"
                          }
                        ],
                        "text": "LDL cholesterol"
                      },
                      "subject": {
                        "reference": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41"
                      },
                      "effectiveDateTime": "2025-10-09T00:00:00Z",
                      "valueQuantity": {
                        "value": 110,
                        "unit": "mg/dL",
                        "system": "http://unitsofmeasure.org",
                        "code": "mg/dL"
                      }
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:11111111-aaaa-4bbb-cccc-000000000004",
                    "resource": {
                      "resourceType": "Observation",
                      "id": "11111111-aaaa-4bbb-cccc-000000000004",
                      "language": "en-US",
                      "status": "final",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">Glucose: 95 mg/dL.</div>"
                      },
                      "category": [
                        {
                          "coding": [
                            {
                              "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                              "code": "laboratory",
                              "display": "Laboratory"
                            }
                          ]
                        }
                      ],
                      "code": {
                        "coding": [
                          {
                            "system": "http://loinc.org",
                            "code": "2345-7",
                            "display": "Glucose [Mass/volume] in Serum or Plasma"
                          }
                        ],
                        "text": "Glucose"
                      },
                      "subject": {
                        "reference": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41"
                      },
                      "effectiveDateTime": "2025-10-09T00:00:00Z",
                      "valueQuantity": {
                        "value": 95,
                        "unit": "mg/dL",
                        "system": "http://unitsofmeasure.org",
                        "code": "mg/dL"
                      }
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:11111111-aaaa-4bbb-cccc-000000000005",
                    "resource": {
                      "resourceType": "Observation",
                      "id": "11111111-aaaa-4bbb-cccc-000000000005",
                      "language": "en-US",
                      "status": "final",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">Systolic blood pressure: 128 mmHg.</div>"
                      },
                      "category": [
                        {
                          "coding": [
                            {
                              "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                              "code": "vital-signs",
                              "display": "Vital Signs"
                            }
                          ]
                        }
                      ],
                      "code": {
                        "coding": [
                          {
                            "system": "http://loinc.org",
                            "code": "8480-6",
                            "display": "Systolic blood pressure"
                          }
                        ],
                        "text": "Systolic BP"
                      },
                      "subject": {
                        "reference": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41"
                      },
                      "effectiveDateTime": "2025-10-09T00:00:00Z",
                      "valueQuantity": {
                        "value": 128,
                        "unit": "mmHg",
                        "system": "http://unitsofmeasure.org",
                        "code": "mm[Hg]"
                      }
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:11111111-aaaa-4bbb-cccc-000000000006",
                    "resource": {
                      "resourceType": "Observation",
                      "id": "11111111-aaaa-4bbb-cccc-000000000006",
                      "language": "en-US",
                      "status": "final",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">Diastolic blood pressure: 82 mmHg.</div>"
                      },
                      "category": [
                        {
                          "coding": [
                            {
                              "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                              "code": "vital-signs",
                              "display": "Vital Signs"
                            }
                          ]
                        }
                      ],
                      "code": {
                        "coding": [
                          {
                            "system": "http://loinc.org",
                            "code": "8462-4",
                            "display": "Diastolic blood pressure"
                          }
                        ],
                        "text": "Diastolic BP"
                      },
                      "subject": {
                        "reference": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41"
                      },
                      "effectiveDateTime": "2025-10-09T00:00:00Z",
                      "valueQuantity": {
                        "value": 82,
                        "unit": "mmHg",
                        "system": "http://unitsofmeasure.org",
                        "code": "mm[Hg]"
                      }
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:22222222-aaaa-4bbb-cccc-000000000007",
                    "resource": {
                      "resourceType": "Observation",
                      "id": "22222222-aaaa-4bbb-cccc-000000000007",
                      "language": "en-US",
                      "status": "final",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">ALAT (ALT): 28 U/L.</div>"
                      },
                      "category": [
                        {
                          "coding": [
                            {
                              "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                              "code": "laboratory",
                              "display": "Laboratory"
                            }
                          ]
                        }
                      ],
                      "code": {
                        "coding": [
                          {
                            "system": "http://loinc.org",
                            "code": "1742-6",
                            "display": "Alanine aminotransferase [Enzymatic activity/volume] in Serum or Plasma"
                          }
                        ],
                        "text": "ALAT (ALT)"
                      },
                      "subject": {
                        "reference": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41"
                      },
                      "effectiveDateTime": "2025-10-09T00:00:00Z",
                      "valueQuantity": {
                        "value": 28,
                        "unit": "U/L",
                        "system": "http://unitsofmeasure.org",
                        "code": "U/L"
                      }
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:33333333-aaaa-4bbb-cccc-000000000008",
                    "resource": {
                      "resourceType": "Observation",
                      "id": "33333333-aaaa-4bbb-cccc-000000000008",
                      "language": "en-US",
                      "status": "final",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">Urea (BUN): 18 mg/dL.</div>"
                      },
                      "category": [
                        {
                          "coding": [
                            {
                              "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                              "code": "laboratory",
                              "display": "Laboratory"
                            }
                          ]
                        }
                      ],
                      "code": {
                        "coding": [
                          {
                            "system": "http://loinc.org",
                            "code": "3094-0",
                            "display": "Urea nitrogen [Mass/volume] in Serum or Plasma"
                          }
                        ],
                        "text": "Urea (BUN)"
                      },
                      "subject": {
                        "reference": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41"
                      },
                      "effectiveDateTime": "2025-10-09T00:00:00Z",
                      "valueQuantity": {
                        "value": 18,
                        "unit": "mg/dL",
                        "system": "http://unitsofmeasure.org",
                        "code": "mg/dL"
                      }
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:44444444-aaaa-4bbb-cccc-000000000009",
                    "resource": {
                      "resourceType": "Observation",
                      "id": "44444444-aaaa-4bbb-cccc-000000000009",
                      "language": "en-US",
                      "status": "final",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">Height: 178 cm.</div>"
                      },
                      "category": [
                        {
                          "coding": [
                            {
                              "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                              "code": "vital-signs",
                              "display": "Vital Signs"
                            }
                          ]
                        }
                      ],
                      "code": {
                        "coding": [
                          {
                            "system": "http://loinc.org",
                            "code": "8302-2",
                            "display": "Body height"
                          }
                        ],
                        "text": "Height"
                      },
                      "subject": {
                        "reference": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41"
                      },
                      "effectiveDateTime": "2025-10-09T00:00:00Z",
                      "valueQuantity": {
                        "value": 178,
                        "unit": "cm",
                        "system": "http://unitsofmeasure.org",
                        "code": "cm"
                      }
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:55555555-aaaa-4bbb-cccc-000000000010",
                    "resource": {
                      "resourceType": "Observation",
                      "id": "55555555-aaaa-4bbb-cccc-000000000010",
                      "language": "en-US",
                      "status": "final",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">Weight: 82 kg.</div>"
                      },
                      "category": [
                        {
                          "coding": [
                            {
                              "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                              "code": "vital-signs",
                              "display": "Vital Signs"
                            }
                          ]
                        }
                      ],
                      "code": {
                        "coding": [
                          {
                            "system": "http://loinc.org",
                            "code": "29463-7",
                            "display": "Body weight"
                          }
                        ],
                        "text": "Weight"
                      },
                      "subject": {
                        "reference": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41"
                      },
                      "effectiveDateTime": "2025-10-09T00:00:00Z",
                      "valueQuantity": {
                        "value": 82,
                        "unit": "kg",
                        "system": "http://unitsofmeasure.org",
                        "code": "kg"
                      }
                    }
                  },
                  {
                    "fullUrl": "urn:uuid:66666666-aaaa-4bbb-cccc-000000000011",
                    "resource": {
                      "resourceType": "Observation",
                      "id": "66666666-aaaa-4bbb-cccc-000000000011",
                      "language": "en-US",
                      "status": "final",
                      "text": {
                        "status": "generated",
                        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">Uric acid: 5.6 mg/dL.</div>"
                      },
                      "category": [
                        {
                          "coding": [
                            {
                              "system": "http://terminology.hl7.org/CodeSystem/observation-category",
                              "code": "laboratory",
                              "display": "Laboratory"
                            }
                          ]
                        }
                      ],
                      "code": {
                        "coding": [
                          {
                            "system": "http://loinc.org",
                            "code": "3084-1",
                            "display": "Uric acid [Mass/volume] in Serum or Plasma"
                          }
                        ],
                        "text": "Uric acid"
                      },
                      "subject": {
                        "reference": "urn:uuid:2a3f9f10-5b1c-4ad3-9c1c-6f8a2a0b3e41"
                      },
                      "effectiveDateTime": "2025-10-09T00:00:00Z",
                      "valueQuantity": {
                        "value": 5.6,
                        "unit": "mg/dL",
                        "system": "http://unitsofmeasure.org",
                        "code": "mg/dL"
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "draftTestId": {
                      "type": "string",
                      "description": "draft test id"
                    },
                    "itemsMapped": {
                      "type": "integer",
                      "description": "number of fields that were mapped successfully from the FHIR object"
                    }
                  },
                  "required": [
                    "success",
                    "draftTestId",
                    "itemsMapped"
                  ]
                },
                "example": {
                  "success": true,
                  "draftTestId": "29adb0ff-4529-4ef5-9ffb-7cc73bd3ef4c",
                  "itemsMapped": 11
                }
              }
            },
            "headers": {}
          }
        },
        "security": []
      }
    }
  },
  "components": {
    "schemas": {},
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT Bearer token obtained from authentication endpoints"
      }
    }
  },
  "servers": [],
  "security": []
}